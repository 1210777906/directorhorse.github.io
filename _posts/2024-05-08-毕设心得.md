---
layout: post
title: "毕设快结束的一些感想"
date:   2024-5-8
tags: [毕设]
comments: false
author: directorhorse
---
## 毕设状态
&emsp;&emsp;截至2024/5/7日，毕设已经完成，毕业论文初稿也已经完成并发送给导师。接下来就是等导师给出意见然后修改论文，之后提交材料做ppt准备答辩了 \
&emsp;&emsp;截至2024/5/11日，导师评价初稿除了格式问题外，写的像记流水账，没有突出重点。我应该不追求面面俱到，应该着重介绍重点和关键问题以及你是如何解决的 \
&emsp;&emsp;截至2024/5/13日，毕业论文第二稿修改完成。除了改正了导师指出的问题外，还添加了加速比的测试。加速比测出来是1.84，但这实际上偏大。我提出的用户程序加速比，测出来大概是1.64，感觉效率算是比较低的了。
&emsp;&emsp;截至2024/5/15，导师给出了第二版的意见。这次主要是缺少一部分内容，加上这部分内容应该就差不多可以提交了。
## 关于选题
&emsp;&emsp;当时导师给的题目有两个，一个是基于minisys的深度学习加速器，另一个则是我做的双核RISC-V处理器的设计与实现。我硕士专业其实是人工智能，理论上来说第一个选题显然更符合。但考虑到这是一个我接触不多的领域，其实现会比较困难，万一本科毕业不了就不好了，所以稳妥起见还是选择了双核RISC-V处理器。\
&emsp;&emsp;虽然我之前的计算机系统综合设计已经设计了一个单核RISC-V处理器，但当时经验不足，逻辑比较混乱；并且由于时间紧张，没有经过详细的测试，存在不少的bug。而且当时没用总线，这进一步提高了难度。之后看了一些多核处理器的书籍，发现需要一个叫Cache一致性的东西。我一看就知道这玩意不是我能做出来的，果断放弃多级Cache的计划，直接只用一级Cache。现在我勉强做出来了，但就连一级Cache还是只有数据Cache，妥妥一个废物处理器。不过我觉得应付毕设应该足够了。\
&emsp;&emsp;后面我还移植了FreeRTOS。移植的原因是我觉得工作量不太够，毕竟设计的处理器这么垃圾，想要提高点分数只能从软件方面入手了。开源的RTOS比较知名的有FreeRTOS和RT-Thread两个，选择FreeRTOS是因为它代码比RT-Thread少很多，而且网上有现成的例子可以参考。但是在SMP功能上FreeRTOS可坑死我了，其官方对SMP的支持十分有限，基本上就是给出了几个建议实现的函数，然后给了几个推荐例程。看了下例程，都是ARM的，并且基本上都是各自实现各自的，每个标准。这导致我中途去看RT-Thread，但仍没看懂。后来终于找到了个K210移植了FreeRTOS SMP，虽然仍然很复杂，最后好歹是勉强部分移植了。\
&emsp;&emsp;这毕设表面上看是做了一个学期，实际上几乎是做了一年。23年暑假保研联系导师后就开始学习RISC-V和处理器的设计，然后衔接大三上的计算机系统综合设计，再到现在的毕设，真是实打实的做了一年。
## 本科生涯总结以及为什么选偏硬件的方向
&emsp;&emsp;我本科四年至少前三年都挺狗屎的。没怎么出去玩过，也没谈过恋爱，课外知识也没学多少，天天想着绩点，弥补高考的失利。结果给我自己整出来了玉玉症，想去更好的学校是彻底没戏了，不过好在还是保了本校。\
&emsp;&emsp;前三年的学习简直是迷茫，完全找不到自己想干什么。大一的时候学安全，搞安全竞赛；大二的时候学深度学习，搞AI；大三的时候学Java、Python，搞后端。直到保研后才确定自己的方向。\
&emsp;&emsp;为什么我会选择偏向底层的计算机体系结构方向呢？感觉这和我高中学物理竞赛的经历有关。众所周知，对于数学、物理这种理科，人们的学习一般是自下而上的，先学会了底层原理再往上拓展，在我看来这就是一种符合逻辑的行为，是“逻辑自洽”的。但计算机不同，人们开始学计算机肯定不会从电路之类的东西学起，必然是编程语言写“hello world”。这种方式让我非常难受，只知道其然不知道所以然，我觉得这是缺乏逻辑的，不那么数学的。It's wrong，没有慧根的。直到大三我开始做导师交给我的任务我才渐渐对计算机有了个比较系统的认知。不得不说，计算机系统综合设计这门课是真的好哇，强烈建议推广给软工和AI的同学(😀)